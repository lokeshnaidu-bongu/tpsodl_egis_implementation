/*! ElectricOfficeWeb 5.0.1 2021-06-16 */
define(["jquery","underscore","text!viewer-partials/modal-alert.html","text!viewer-partials/map-alert.html","i18n!viewer/nls/messages","hogan","bootstrap/modal","bootstrap/transition","map-core-component/pubsub"],function(a,b,c,d,e,f){"use strict";var g,h=f.compile(c),i=f.compile(d),j=100,k=1e3,l={sticky:!1,messageType:"info",message:"",errorMessage:"",timerDelay:5e3},m="#mapContainer",n=function(){a.subscribe("raiseAlert",o),a.subscribe("raiseStickyMessage",p),a.subscribe("raiseTempMessage",q)},o=function(b){a("#modal-alert").remove(),a("body").append(h.render({messages:e.error_handler,alertText:b})),a("#modal-alert").modal()},p=function(a,c){g=b.extend({},l,c),g.sticky=!0,g.message=a,r(g)},q=function(a,c){g=b.extend({},l,c),g.sticky=!1,g.message=a,r(g)},r=function(b){b.errorMessage&&(g.errorMessage=t(g.errorMessage));var c,d=m;b.selector&&(d=b.selector),a("#map-alert").remove(),a(d).prepend(i.render(b)),c=a("#map-alert"),c.fadeIn(j,s)},s=function(){g.sticky||a(this).delay(g.timerDelay).fadeOut(k)},t=function(a){var b=/(<h1>.*)<\/body>/.exec(a);return b[1]?b[1]:a},u=function(a){m=a},v=function(){return m};n();var w={getDefaultAlertTargetSelector:v,setDefaultAlertTargetSelector:u};return w.__TEST_ONLY__={createModalAlert:o,fadeOut:s,setOptions:function(a){g=b.extend({},l,a)}},w});