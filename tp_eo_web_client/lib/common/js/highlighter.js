/*! ElectricOfficeWeb 5.0.1 2021-06-16 */
define(["jquery","underscore","OpenLayers3","map-loader","map-helper","map-core-component/pubsub"],function(a,b,c,d,e){"use strict";var f={},g={strokeWidth:10,strokeColor:"rgba(255, 105, 180, 0.75)",fillColor:"rgba(255, 105, 180, 0.75)",fillOpacity:.75,pointRadius:2.5};d.style&&(g=b.extend(g,d.style.highlighter));var h=new c.style.Fill({color:g.fillColor}),i=new c.style.Stroke({color:g.strokeColor,width:g.strokeWidth}),j={image:new c.style.Circle({fill:h,stroke:i,radius:g.pointRadius}),fill:h,stroke:i},k=function(){a.subscribe("clearHighlight",o),a.subscribe("gotoHighlightExtent",p),a.subscribe("highlightFeatures",m),a.subscribe("highlightFeaturesAndGoto",n),a.subscribe("overlayInitialised",l),a.subscribe("internalsMapInitialised",l),a.subscribe("mapInitialised",l)},l=function(a,b){var e={style:new c.style.Style(j),source:new c.source.Vector({wrapX:!1}),renderOrder:null,maxResolution:b.getView().getMaxResolution()||d.MapOptions.MaxResolution},g={map:b,layer:new c.layer.Vector(e),mapName:a};g.layer.name="highlight_"+a,f[a]=g},m=function(a,b){f[a]&&r(f[a],b)},n=function(a,b){f[a]&&(r(f[a],b),q(f[a]))},o=function(a){f[a]&&s(f[a])},p=function(a){f[a]&&q(f[a])},q=function(a){e.gotoExtentsOfLayer(a.map,a.layer)},r=function(b,c){s(b),e.addFeaturesToLayer(b.layer,c),b.layer.div&&(b.layer.div.id="OpenLayers_Layer_Highlight"),b.map.addLayer(b.layer),b.map.render(),a.publish("featuresHighlighted",[])},s=function(a){a.layer.getSource().clear(),a.map.removeLayer(a.layer)};k();var t={};return t.__TEST_ONLY__={clearHighlight:s,highlightFeatures:r,gotoExtents:q,setMapObj:function(a,b){f[b]=a},getMapObj:function(a){return f[a]}},t});