/*! ElectricOfficeWeb 5.0.1 2021-06-16 */
define(["jquery","underscore","hogan","i18n!viewer/nls/messages","text!viewer-partials/logout.html","comms","map-core-component/pubsub"],function(a,b,c,d,e,f){"use strict";var g,h={},i={},j=c.compile(e);a.fn.initialiseLogout=function(b){k(a(this),b)};var k=function(b,c){a.extend(!0,h,c),i.logoutPanel=b,i.logoutPanel.append(j.render({messages:d.auth})),i.username=a("#username"),l()},l=function(){var b={dataType:"json",url:"/auth/user",cache:!1};f.getNodeRequest(b,function(b){b.user?(i.username.text(b.user),g=b):a("#logout").hide(),a.publish("userData",[b])},function(b){a.publish("raiseTempMessage",[d.auth.userInfoError,{messageType:"warning"}])})},m=function(){f.isUnauthenticatedApp()||a("#logout").initialiseLogout()},n={initialise:k,init:m};return n});