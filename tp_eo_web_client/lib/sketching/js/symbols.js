/*! ElectricOfficeWeb 5.0.1 2021-06-16 */
define(["jquery","underscore","comms","i18n!viewer/nls/messages","i18n!nls/messages","map-core-component/pubsub"],function(a,b,c,d,e){"use strict";var f,g=function(){var b={service:"ejb/RedlineInfoLocal",method:"getStyles",types:"all",json:"true"};c.getGSSRequest(b,function(a){f=a.all.symbol_styles,h()},function(b){a.publish("raiseTempMessage",[d.sketching.symbolsLoadWarning,{messageType:"warning"}])})},h=function(){var c=b.size(f),e=f,g=new Array(c),h=a("#sketchControl #symbolButtons");b.each(e,function(a,b){g[a.orderNo]=b}),b.each(g,function(b){var c=e[b],f='<image style="margin:0;" src="'+i(c).svg+'"/>',g=b,j=void 0!==d.sketching[c.value]?d.sketching[c.value]:c.value,k=a('<div class="sketchButton"><button data-descrip="pointDescription" data-options-group="symbolButtons" id="point_symbol_'+g+'_red" data-descrip="" class="btn btn-icon" title="'+j+'">'+f+"</button></div>");h.append(k)}),a.publish("buttonPaletteCreated",[f])},i=function(a){var b=a.width,c=a.height,d='<svg width="'+b+'" height="'+c+'" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">',e='<use xlink:href="#'+a.name+'" transform="translate(18 18) scale(1 -1)" width="24" height="24"/>',f="</svg>",g="data:image/svg+xml;charset=utf-8;base64,"+btoa(d+a.svgProperties.definition+e+f);return{svg:g,width:b,height:c}},j=function(){return f},k={init:g,retrieveSymbols:j,getImageSvg:i};return k.__TEST_ONLY__={createButtonPalette:h,setSymbols:function(a){f=a}},k});