/*! ElectricOfficeWeb 5.0.1 2021-06-16 */
define(["jquery","underscore","OpenLayers3","map-loader","hogan"],function(a,b,c,d,e){"use strict";var f,g,h,i,j=d.distanceUnits,k=e.compile('<div class="btn-group btn-filter feature-dimension" style="padding-right:10px;color:white;font-size:14px;">{{{value}}}</div>'),l=new c.Sphere(6378137),m=function(a){i=a},n=function(a,b){for(var d,e=0,f=b.getCoordinates(),g=0;g<f.length-1;++g){var h=c.proj.transform(f[g],a,"EPSG:4326"),i=c.proj.transform(f[g+1],a,"EPSG:4326");e+=l.haversineDistance(h,i)}return d=Math.round(100*e)/100},o=function(a,b){var c,d,e=b.clone().transform(a,"EPSG:4326"),f=e.getLinearRing(0).getCoordinates();return c=Math.abs(l.geodesicArea(f)),d=Math.round(100*c)/100},p=function(a){var b,c=1,d="",e=i.getView().getProjection();return"LineString"===a.getType()?b=n(e,a):(b=o(e,a),d="<sup>2</sup>"),b=j?(b*Math.pow(e.getMetersPerUnit(),c)).toFixed(2)+" "+j+d:(b*e.getMetersPerUnit()).toFixed(2)+" "+d},q=function(b,c){h||(h=a(".map-toolbar .trace-actions")),h.append(b)},r=function(a){g&&g.html(a)},s=function(b){q(b),g=a(".feature-dimension",h)},t=function(a){if(!(a.getCoordinates().length<1)){var b=p(a),c=k.render({value:b});return g?r(b):s(c),b}},u=function(){g&&(g.remove(),g=void 0)},v={setMap:m,hideDimension:u,showDimension:t};return v.__TEST_ONLY__={updateDimension:r,getDimensionFromGeometry:p,setConversionFactor:function(a){f=a},setPreferredDimension:function(a){j=a},setDimSelector:function(a){g=a},getDimSelector:function(){return g},getMap:function(){return i}},v});