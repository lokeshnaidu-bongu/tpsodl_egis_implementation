/*! ElectricOfficeWeb 5.0.1 2021-06-16 */
define(["jquery","underscore","OpenLayers","i18n!viewer/nls/messages","map-loader","results-list","hogan","comms","map-core-component/pubsub"],function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n="cluster_details",o={};a.subscribe("mapInitialised",function(a,b){k=b,l=a,j&&j.setMap(k,l)});var p=function(a){i=a,j=f.getNewResultsList(a,k,l,n,q),r()},q=function(a){t(m,a)},r=function(){i.html(""),i.hide(),j.clear()},s=function(a){i.show(),j.renderResults(a)},t=function(a,b){var c=function(c){c.feature_count_per_page=10,s(c),0===c.features.features.length&&r(),o[a][b]=c};if(m=a,b||(b=1),o[a]&&o[a][b])return void c(o[a][b]);var d=10*(b-1)+1,e={service:"ejb/QueryLocal",method:"browser",query_type:"browser",result_type:"all",query:'rail_car where event_splc="'+a+'"',feature_count:10,feature_start:d,json:!0};h.getGSSRequest(e,c,u),o[a]||(o[a]={},o[a][b]={})},u=function(){console.log(arguments)};a.subscribe("objectDetailsBoxReady",function(a,b){a===n&&p(b,{id:a})}),a.subscribe("showObjectDetails",t);var v={};return v.__TEST_ONLY__={},v});