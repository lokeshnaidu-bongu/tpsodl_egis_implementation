/*! ElectricOfficeWeb 5.0.1 2021-06-16 */
define(["jquery","underscore","i18n!viewer/nls/messages","map-loader","hogan","comms","proj4","text!viewer-icons/icon-tip.svg","text!locationSearch-partials/locate.html","map-helper","spinner"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k,l,m,n,o,p,q=e.compile(i),r="locationSearch";a.subscribe("mapInitialised",function(a,b){m=b,n=j.getMapProjection()}),a.subscribe("gotoSidebar",function(b){b===r&&(l.html(q.render({messages:c,TipSvg:h,projectionTypes:d.availableProjectionTypes})),a("#goto",l).on("click",v),a("#clear",l).on("click",t),a("#projectionType").change(t),o=a("#easting"),p=a("#northing"),k=a("#emapsSpinner"))}),a.subscribe("sidebarContainerReady",function(a,b){a===r&&s(b,{id:a})});var s=function(a){l=a},t=function(){o.val(""),p.val("")},u=function(b){return""!==b&&(Number(b)===Math.floor(b)||(a.publish("raiseStickyMessage",[c.locationSearch.warningMessage,{messageType:"warning"}]),!1))},v=function(){var b=u(o.val()),c=u(p.val());if(b&&c){var e,f,h=""+d.availableProjectionTypes[a("#projectionType :selected").index()].name;g.defs(h,a("#projectionType").val()),e=[o.val(),p.val()],f=g(h,n.name,e),j.setCurrentMapCentreAndZoom(m,f,d.locateDefaultZoom||15)}},w={};return w.__TEST_ONLY__={initialise:s,clearFields:t,getMap:function(){return m},getMapName:function(){return mapName},getMapProjection:function(){return n},getCardSelector:function(){return l},getEastingField:function(){return o}},w});