/*! ElectricOfficeWeb 5.0.1 2021-06-16 */
define(["jquery","underscore","i18n!nls/messages","text!partials/eo-specialised-info.html","hogan","map-loader","map-core-component/pubsub"],function(a,b,c,d,e,f){"use strict";var g,h="eo_specialised_info",i=e.compile(d),j={},k=function(a,b){a===h&&n(b,{id:a})},l=function(a,d){var e=a.object_info[d].eo_specialised_info;return j.attributes=[],e===!1?(g.prev().hide(),void g.hide()):(g.prev().show(),b.each(e,function(a,d){var e={attrib:a[0]};if("object"==typeof a[1]){var f=[];b.each(a[1],function(a){f.push({name:a.name,description:a.description,urn:a.urn}),e.joins=f})}else if(isNaN(a[1])&&a[1].indexOf("\n")>-1){var g=a[1].split(/\n/g),h=[];b.each(g,function(a,b){h.push({name:a}),e.others=h})}else"flow_direction"===d?e.value=c.object_details.eoSpecialisedInfo.flowDirection[a[1]]:e.value=a[1];j.attributes.push(e)}),void o())},m=function(){a.subscribe("objectDetailsBoxReady",k),a.subscribe("objectInfoCallback",l)};b.each(f.ObjectDetails.layout,function(a){if("eo_specialised_info"===a.name)return void m()});var n=function(a){g=a,g.show(),g.html(i.render({messages:c,infoMessage:c.object_details.nothingSelected}))},o=function(){g.show(),g.html(i.render({feature:0===j.attributes.length?void 0:j,messages:c,infoMessage:c.object_details.eoSpecialisedInfo.noSpecialisedInfo})),a("div.join",g).click(function(){a.publish("showObjectDetails",[{urn:this.id}])})},p={};return p.__TEST_ONLY__={getBoxSelector:function(){return g},setBoxSelector:function(a){g=a},getFeatures:function(){return j}},p});