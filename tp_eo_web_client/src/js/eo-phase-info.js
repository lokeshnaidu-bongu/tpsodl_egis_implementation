/*! ElectricOfficeWeb 5.0.1 2021-06-16 */
define(["jquery","underscore","i18n!nls/messages","hogan","text!partials/eo-phase-info.html","map-loader"],function(a,b,c,d,e,f){"use strict";var g,h="eo_phase_info",i=d.compile(e),j={},k={a:["phases-grad-a"],b:["phases-grad-b"],c:["phases-grad-c"],d:["phases-grad-d"],n:["phases-grad-n"],e:["phases-grad-e"],ne:["phases-grad-ne"],u:["phases-grad-u"]},l=function(){a.subscribe("objectDetailsBoxReady",m),a.subscribe("objectInfoCallback",o)},m=function(a,b){a===h&&n(b,{id:a})},n=function(a){g=a,g.show(),g.html(i.render({features:j,messages:c,infoMessage:c.object_details.nothingSelected}))},o=function(a,c){var d=a.object_info[c].eo_asset_phase_spec_info;return j={boxes:[]},d===!1?(g.prev().hide(),void g.hide()):(g.prev().show(),b.each(d.asset_spec_phases,function(a,c){var d={asset:{},phases:[],specification:0};b.each(a,function(a,c){if(1===c)b.each(a,function(a,b){d.phases.push({name:a.name,description:a.description[1],urn:a.urn,"class":k[a.description[0]]?k[a.description[0]][0]:k.u[0]})});else{var e={name:a[0].name,description:a[0].description,urn:a[0].urn};0===c&&(d.asset=e),2===c&&(d.specification=e)}}),j.boxes.push(d)}),void p())};b.each(f.ObjectDetails.layout,function(a){if(a.name===h)return void l()});var p=function(){g.show(),g.html(i.render({features:j,messages:c,infoMessage:c.object_details.eoPhaseInfo.noDataMessage})),a("div[class^=join], a.join",g).click(function(b){b.preventDefault(),a.publish("showObjectDetails",[{urn:this.id}])})},q={};return q.__TEST_ONLY__={objectInfoCallback:o,buildUI:p,objectDetailsBoxReadyCallback:m,setBoxSelector:function(a){g=a},getBoxSelector:function(){return g},getFeatures:function(){return j}},q});