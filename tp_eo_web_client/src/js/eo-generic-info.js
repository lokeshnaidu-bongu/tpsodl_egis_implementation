/*! ElectricOfficeWeb 5.0.1 2021-06-16 */
define(["jquery","underscore","i18n!nls/messages","text!partials/eo-generic-info.html","hogan","map-loader","map-core-component/pubsub"],function(a,b,c,d,e,f){"use strict";var g,h="eo_generic_info",i=e.compile(d),j={},k=function(a,b){a===h&&n(b,{id:a})},l=function(a,d){var e=a.object_info[d].eo_generic_info;j.attributes=[],b.each(e,function(a,d){var e={attrib:c.object_details.eoGenericInfo[d]};switch(d){case"associated_documents":var f=[];b.each(a,function(a){f.push({link:a})}),e.links=f;break;case"gps_position":e.value=a;break;default:var g=[];b.each(a,function(a){g.push({name:a.name,description:a.description,urn:a.urn})}),e.joins=g}j.attributes.push(e)}),o()},m=function(){a.subscribe("objectDetailsBoxReady",k),a.subscribe("objectInfoCallback",l)};b.each(f.ObjectDetails.layout,function(a){if("eo_generic_info"===a.name)return void m()});var n=function(a){g=a,g.show(),g.html(i.render({messages:c,infoMessage:c.object_details.nothingSelected}))},o=function(){g.show(),g.html(i.render({feature:j,messages:c})),a("div.join",g).click(function(){a.publish("showObjectDetails",[{urn:this.id}])}),a("label.link",g).popover({}),a("label.link",g).click(function(){a("label.link",g).not(this).popover("hide"),a(".link-container .icon-remove-sign").click(function(){a(this).closest(".popover").hide()}),a(".associated-doc input").select()})},p={};return p.__TEST_ONLY__={getBoxSelector:function(){return g},setBoxSelector:function(a){g=a},getFeatures:function(){return j}},p});